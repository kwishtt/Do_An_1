<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoviePredict | Cinematic AI Analytics</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap"
        rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon/favicon.svg') }}">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body class="cinematic-theme">
    <!-- Background Elements -->
    <div class="bg-noise"></div>
    <div class="bg-ambient"></div>
    <canvas id="particles-canvas"></canvas>

    <!-- Navigation -->
    <nav class="glass-nav">
        <div class="container nav-container">
            <a href="#" class="logo">
                <i class="fas fa-film logo-icon"></i>
                <span class="logo-text">MOVIES<span class="highlight">PREDICT</span></span>
            </a>
            <div class="nav-links">
                <a href="#predict" class="active">Dự Đoán</a>
                <a href="#trending">Xu Hướng</a>
                <a href="#story">Insights</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container main-layout">

        <!-- Section 1: Hero & Input -->
        <section id="predict" class="hero-section">
            <div class="hero-content">
                <div class="hero-badge">
                    <span class="pulse-dot"></span> AI POWERED ANALYTICS
                </div>
                <h1 class="hero-title">
                    DỰ ĐOÁN <span class="text-gradient">DOANH THU PHÒNG VÉ</span>
                </h1>
                <p class="hero-subtitle">
                    Nhập thông tin dự án phim của bạn. AI sẽ phân tích hàng nghìn điểm dữ liệu để dự báo khả năng thành
                    công.
                </p>

                <!-- Input Card -->
                <div class="glass-card input-card">
                    <form id="prediction-form">
                        <div class="form-header">
                            <h3><i class="fas fa-search"></i> Phân Tích Dự Án</h3>
                        </div>

                        <div class="form-grid">
                            <!-- Title -->
                            <div class="form-group full-width">
                                <label class="mono-label">TÊN DỰ ÁN (PROJECT TITLE)</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-heading"></i>
                                    <input type="text" id="title" name="title" placeholder="Nhập tên phim..." required>
                                </div>
                            </div>

                            <div class="form-group floating-group">
                                <label class="mono-label">NGÂN SÁCH (BUDGET)</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-dollar-sign"></i>
                                    <input type="number" id="budget" name="budget" required placeholder="0" min="0">
                                </div>
                            </div>

                            <div class="form-group floating-group">
                                <label class="mono-label">DOANH THU HIỆN TẠI (CURRENT REV)</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-chart-line"></i>
                                    <input type="number" id="revenue" name="revenue" required placeholder="0" min="0">
                                </div>
                            </div>

                            <div class="form-group floating-group">
                                <label class="mono-label">ĐIỂM ĐÁNH GIÁ (TMDB SCORE)</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-star"></i>
                                    <input type="number" id="vote_average" name="vote_average" step="0.1" min="0"
                                        max="10" required placeholder="0.0">
                                </div>
                            </div>

                            <div class="form-group floating-group">
                                <label class="mono-label">THỜI LƯỢNG (RUNTIME)</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-clock"></i>
                                    <input type="number" id="runtime" name="runtime" required placeholder="Phút"
                                        min="0">
                                </div>
                            </div>

                            <!-- Genres -->
                            <div class="form-group full-width">
                                <label class="mono-label">THỂ LOẠI (GENRES)</label>
                                <div class="genre-selector" id="genre-selector">
                                    <!-- Generated by JS -->
                                </div>
                                <input type="hidden" id="genres" name="genres">
                            </div>

                            <div class="form-actions">
                                <button type="button" id="randomDataBtn" class="btn-secondary">
                                    <i class="fas fa-random"></i> AUTO-FILL
                                </button>
                                <button type="submit" id="submitBtn" class="btn-primary">
                                    <span class="btn-text">DỰ ĐOÁN NGAY</span>
                                    <span class="btn-loader"><i class="fas fa-circle-notch fa-spin"></i></span>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Section 2: Trending Predictions (New) -->
        <section id="trending" class="trending-section">
            <div class="section-header">
                <h2 class="section-title">TRENDING <span class="text-stroke">PREDICTIONS</span></h2>
                <div class="nav-arrows">
                    <button class="arrow-btn"><i class="fas fa-chevron-left"></i></button>
                    <button class="arrow-btn"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <div class="trending-grid">
                <!-- Card 1 -->
                <div class="glass-card movie-card">
                    <div class="card-image"
                        style="background-image: url('https://image.tmdb.org/t/p/w500/1E5baAaEse26fej7uHcjOgEE2t2.jpg')">
                        <div class="card-overlay"></div>
                        <div class="card-rating">98%</div>
                    </div>
                    <div class="card-info">
                        <h3 class="movie-title">Fast X</h3>
                        <div class="movie-meta">
                            <span class="meta-item"><i class="fas fa-dollar-sign"></i> $340M</span>
                            <span class="meta-item"><i class="fas fa-star"></i> 7.2</span>
                        </div>
                        <div class="prediction-bar">
                            <div class="bar-fill" style="width: 98%"></div>
                        </div>
                        <div class="prediction-label">
                            <span>Success Probability</span>
                            <span class="mono-text">HIGH</span>
                        </div>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="glass-card movie-card">
                    <div class="card-image"
                        style="background-image: url('https://upload.wikimedia.org/wikipedia/vi/1/13/BI%E1%BB%86T_%C4%90%E1%BB%98I_MARVEL_-_Vietnam_poster.jpg')">
                        <div class="card-overlay"></div>
                        <div class="card-rating warning">45%</div>
                    </div>
                    <div class="card-info">
                        <h3 class="movie-title">The Marvels</h3>
                        <div class="movie-meta">
                            <span class="meta-item"><i class="fas fa-dollar-sign"></i> $270M</span>
                            <span class="meta-item"><i class="fas fa-star"></i> 5.8</span>
                        </div>
                        <div class="prediction-bar">
                            <div class="bar-fill warning" style="width: 45%"></div>
                        </div>
                        <div class="prediction-label">
                            <span>Success Probability</span>
                            <span class="mono-text">RISKY</span>
                        </div>
                    </div>
                </div>

                <!-- Card 3 -->
                <div class="glass-card movie-card">
                    <div class="card-image"
                        style="background-image: url('https://image.tmdb.org/t/p/w500/qhb1qOilapbapxWQn9jtRCMwXJF.jpg')">
                        <div class="card-overlay"></div>
                        <div class="card-rating">88%</div>
                    </div>
                    <div class="card-info">
                        <h3 class="movie-title">Wonka</h3>
                        <div class="movie-meta">
                            <span class="meta-item"><i class="fas fa-dollar-sign"></i> $125M</span>
                            <span class="meta-item"><i class="fas fa-star"></i> 7.8</span>
                        </div>
                        <div class="prediction-bar">
                            <div class="bar-fill" style="width: 88%"></div>
                        </div>
                        <div class="prediction-label">
                            <span>Success Probability</span>
                            <span class="mono-text">HIGH</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Results Dashboard (Hidden by default) -->
        <section id="results" class="results-section hidden">
            <div class="section-header">
                <div>
                    <h2 class="section-title">ANALYSIS <span class="text-stroke">RESULTS</span></h2>
                    <h3 id="result-movie-title" class="result-movie-title mono-text"></h3>
                </div>
                <button id="resetBtn" class="btn-icon"><i class="fas fa-redo"></i></button>
            </div>

            <!-- New Hero Layout -->
            <div class="hero-result-container glass-card">
                <div class="hero-grid">
                    <!-- Left: Gauge & Status -->
                    <div class="hero-status-col">
                        <div class="gauge-wrapper">
                            <canvas id="predictionGauge"></canvas>
                            <div class="gauge-value">
                                <span id="confidence-value" class="mono-text">98%</span>
                                <small>PROBABILITY</small>
                            </div>
                        </div>
                        <div class="status-text-wrapper">
                            <div class="prediction-status" id="prediction-status">
                                <!-- JS will inject icon and text -->
                            </div>
                            <p class="prediction-desc" id="prediction-desc">
                                <!-- JS will inject description -->
                            </p>
                        </div>
                    </div>

                    <!-- Right: Key Metrics -->
                    <div class="hero-metrics-col">
                        <div class="metric-pill">
                            <div class="pill-icon"><i class="fas fa-chart-line"></i></div>
                            <div class="pill-content">
                                <span class="pill-label">ROI ESTIMATE</span>
                                <span class="pill-value mono-text" id="roi-value">--</span>
                            </div>
                        </div>

                        <div class="metric-pill">
                            <div class="pill-icon"><i class="fas fa-shield-alt"></i></div>
                            <div class="pill-content">
                                <span class="pill-label">RISK LEVEL</span>
                                <span class="pill-value mono-text" id="risk-value">--</span>
                            </div>
                        </div>

                        <div class="metric-pill">
                            <div class="pill-icon"><i class="fas fa-money-bill-wave"></i></div>
                            <div class="pill-content">
                                <span class="pill-label">REV FORECAST</span>
                                <span class="pill-value mono-text" id="revenue-value">--</span>
                            </div>
                        </div>

                        <div class="model-badge-hero">
                            <i class="fas fa-microchip"></i> MODEL: RANDOM FOREST (99.5%)
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid mt-4">
                <!-- Chart Section -->
                <div class="glass-card chart-card full-width">
                    <h3><i class="fas fa-chart-bar"></i> FEATURE IMPORTANCE</h3>
                    <div class="chart-container">
                        <canvas id="featureChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Data Storytelling -->
        <section id="story" class="story-section">
            <div class="container">
                <!-- Intro Block -->
                <div class="story-intro text-center mb-5 reveal-on-scroll">
                    <span class="badge-glow">PROJECT REPORT</span>
                    <h2 class="story-title">THE DATA <span class="text-stroke">JOURNEY</span></h2>
                    <p class="story-lead text-reveal">
                        Hành trình biến dữ liệu thô thành tri thức.
                    </p>
                </div>

                <!-- Chapter 1: The Data -->
                <div class="story-chapter">
                    <div class="chapter-header reveal-left">
                        <span class="chapter-number">01</span>
                        <h3>DATA PROCESSING</h3>
                    </div>
                    <div class="chapter-content">
                        <div class="row">
                            <div class="col-text reveal-left stagger-1">
                                <p>
                                    Xử lý <strong>2,194 bộ phim</strong>. Làm sạch dữ liệu, xử lý giá trị thiếu và loại
                                    bỏ nhiễu.
                                </p>
                                <div class="stats-mini-grid">
                                    <div class="stat-mini">
                                        <strong class="mono-text">2,194</strong>
                                        <span>MOVIES</span>
                                    </div>
                                    <div class="stat-mini">
                                        <strong class="mono-text">47</strong>
                                        <span>FEATURES</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-visual reveal-right stagger-2">
                                <div class="glass-card chart-box-mini">
                                    <h4>GENRE DISTRIBUTION</h4>
                                    <div class="chart-wrapper-mini">
                                        <canvas id="genreChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chapter 2: The Model Race -->
                <div class="story-chapter reverse">
                    <div class="chapter-header reveal-right">
                        <span class="chapter-number">02</span>
                        <h3>ALGORITHM RACE</h3>
                    </div>
                    <div class="chapter-content">
                        <div class="row">
                            <div class="col-visual reveal-left stagger-1">
                                <div class="glass-card comparison-card">
                                    <h4 class="mono-text mb-3" style="margin-bottom: 15px;">MODEL PERFORMANCE</h4>
                                    <div class="comparison-bar">
                                        <div class="model-name">
                                            <span>Logistic Regression</span>
                                            <span>84.88%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 84.88%"></div>
                                        </div>
                                    </div>
                                    <div class="comparison-bar winner">
                                        <div class="model-name">
                                            <span class="highlight">Random Forest <i class="fas fa-crown"></i></span>
                                            <span class="highlight">99.52%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 99.52%"></div>
                                        </div>
                                    </div>
                                    <p class="text-muted" style="font-size: 0.85rem; margin-top: 15px;">
                                        Random Forest vượt trội nhờ khả năng xử lý các mối quan hệ phi tuyến tính phức
                                        tạp.
                                    </p>
                                </div>
                            </div>
                            <div class="col-text reveal-right stagger-2">
                                <p>
                                    Tuần thứ 5 là thời điểm quyết định. Chúng tôi đưa hai "đấu thủ" lên sàn đấu:
                                    <strong>Logistic Regression</strong> (cổ điển) và <strong>Random Forest</strong>
                                    (hiện đại).
                                </p>
                                <p>
                                    Kết quả thật bất ngờ. Trong khi Logistic Regression chỉ đạt độ chính xác ~85%,
                                    <strong>Random Forest</strong> đã bứt phá ngoạn mục với <strong>F1-Score
                                        99.52%</strong>.
                                    Mô hình này đã chứng minh khả năng học hỏi tuyệt vời từ những tương tác phức tạp.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chapter 3: The Insights -->
                <div class="story-chapter">
                    <div class="chapter-header reveal-left">
                        <span class="chapter-number">03</span>
                        <h3>SUCCESS FACTORS</h3>
                    </div>
                    <div class="chapter-content">
                        <p class="text-center mb-5 story-lead reveal-on-scroll" style="margin-bottom: 40px;">
                            Điều gì thực sự làm nên một bộ phim "bom tấn"? Phân tích Feature Importance đã hé lộ:
                        </p>
                        <div class="insights-grid">
                            <div class="glass-card insight-card reveal-on-scroll stagger-1">
                                <div class="insight-icon"><i class="fas fa-star"></i></div>
                                <h4>QUALITY IS KING</h4>
                                <div class="insight-value">41.56%</div>
                                <p style="font-size: 0.85rem; color: var(--text-muted);">
                                    <strong>Vote Average</strong> là yếu tố quan trọng nhất. Khán giả ngày nay rất thông
                                    minh, phim hay thực sự sẽ luôn có chỗ đứng.
                                </p>
                            </div>
                            <div class="glass-card insight-card reveal-on-scroll stagger-2">
                                <div class="insight-icon"><i class="fas fa-balance-scale"></i></div>
                                <h4>BUDGET BALANCE</h4>
                                <div class="insight-value">10.70%</div>
                                <p style="font-size: 0.85rem; color: var(--text-muted);">
                                    <strong>ROI vs Vote</strong>: Sự cân bằng giữa lợi nhuận và nghệ thuật. Phim vừa lời
                                    vừa được khen mới là thành công bền vững.
                                </p>
                            </div>
                            <div class="glass-card insight-card reveal-on-scroll stagger-3">
                                <div class="insight-icon"><i class="fas fa-bullhorn"></i></div>
                                <h4>VIRAL POWER</h4>
                                <div class="insight-value">5.14%</div>
                                <p style="font-size: 0.85rem; color: var(--text-muted);">
                                    <strong>Vote Count</strong>: Số lượng người quan tâm phản ánh độ phủ sóng (viral) và
                                    sức mạnh truyền thông của dự án.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Conclusion -->
                <div class="story-footer text-center mt-5 reveal-on-scroll"
                    style="text-align: center; margin-top: 60px;">
                    <p class="story-lead text-reveal">
                        "Dự án này không chỉ là bài tập, mà là nỗ lực mang góc nhìn <strong>Data Science</strong> vào
                        nghệ thuật điện ảnh.
                        Hy vọng công cụ này sẽ hỗ trợ đắc lực cho các nhà làm phim Việt Nam."
                    </p>
                    <div class="signature reveal-on-scroll stagger-1">
                        <span class="mono-text">GROUP 04 - KHDLK68 - HUMG</span>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="team-section">
            <div class="section-header-center">
                <h2 class="section-title">THE <span class="text-stroke">TEAM</span></h2>
            </div>

            <div class="team-grid">
                <div class="glass-card team-card">
                    <div class="member-avatar">
                        <img src="{{ url_for('static', filename='images/member1.jpg') }}" alt="Member 1"
                            onerror="this.src='https://ui-avatars.com/api/?name=Khuê+Đinh&background=FFD700&color=000'">
                    </div>
                    <h3>Đinh Ngọc Khuê</h3>
                    <p class="role mono-text">DATA EDA</p>
                </div>

                <div class="glass-card team-card">
                    <div class="member-avatar">
                        <img src="{{ url_for('static', filename='images/member2.jpg') }}" alt="Member 2"
                            onerror="this.src='https://ui-avatars.com/api/?name=Hoà+Khổng&background=00f2ff&color=000'">
                    </div>
                    <h3>Khổng Thị Hoà</h3>
                    <p class="role mono-text">TEAM LEADER</p>
                </div>

                <div class="glass-card team-card">
                    <div class="member-avatar">
                        <img src="{{ url_for('static', filename='images/member3.jpg') }}" alt="Member 3"
                            onerror="this.src='https://ui-avatars.com/api/?name=Huy+Phan&background=ff4d4d&color=fff'">
                    </div>
                    <h3>Phan Văn Huy</h3>
                    <p class="role mono-text">DATA ENGINEER</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p class="mono-text">&copy; 2024 MOVIE PREDICT | GROUP 04 HUMG</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>