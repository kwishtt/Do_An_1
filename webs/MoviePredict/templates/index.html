<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoviePredict | AI Box Office Analytics</title>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon/favicon.svg') }}">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body class="dark-theme">
    <!-- Background Elements -->
    <div class="bg-noise"></div>
    <div class="bg-aurora"></div>
    <canvas id="particles-canvas"></canvas>

    <!-- Navigation -->
    <nav class="glass-nav">
        <div class="container nav-container">
            <a href="#" class="logo">
                <i class="fas fa-film logo-icon"></i>
                <span class="logo-text">Movie<span class="highlight">Predict</span></span>
            </a>
            <div class="nav-links">
                <a href="#predict" class="active">Dự Đoán</a>
                <a href="#model">Mô Hình</a>
                <a href="#about">Về Chúng Tôi</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container main-layout">

        <!-- Section 1: Hero & Input -->
        <section id="predict" class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title glitch-text" data-text="Dự Đoán Doanh Thu Phim">
                    Dự Đoán <span class="text-gradient">Doanh Thu Phim</span><br>
                    Bằng Trí Tuệ Nhân Tạo
                </h1>
                <p class="hero-subtitle">
                    Phân tích tiềm năng thành công của dự án phim điện ảnh Việt Nam với độ chính xác 99.5% dựa trên dữ
                    liệu lịch sử.
                </p>

                <!-- Input Card -->
                <div class="glass-card input-card">
                    <form id="prediction-form">
                        <div class="form-header">
                            <h3><i class="fas fa-magic"></i> Nhập Thông Tin Phim</h3>
                        </div>

                        <div class="form-grid">
                            <!-- Title -->
                            <div class="form-group full-width">
                                <label>Tên Phim</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-heading"></i>
                                    <input type="text" id="title" name="title" placeholder="VD: Mai, Lật Mặt 7..."
                                        required>
                                </div>
                            </div>

                            <div class="form-group floating-group">
                                <div class="input-wrapper">
                                    <input type="number" id="budget" name="budget" required placeholder=" " min="0">
                                    <label for="budget">Ngân Sách (USD)</label>
                                    <i class="fas fa-money-bill-wave"></i>
                                </div>
                            </div>

                            <div class="form-group floating-group">
                                <div class="input-wrapper">
                                    <input type="number" id="revenue" name="revenue" required placeholder=" " min="0">
                                    <label for="revenue">Doanh Thu Hiện Tại (USD)</label>
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <small class="hint">Nhập 0 nếu phim chưa chiếu</small>
                            </div>

                            <div class="form-group floating-group">
                                <div class="input-wrapper">
                                    <input type="number" id="vote_average" name="vote_average" step="0.1" min="0"
                                        max="10" required placeholder=" ">
                                    <label for="vote_average">Điểm Đánh Giá (TMDB)</label>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>

                            <div class="form-group floating-group">
                                <div class="input-wrapper">
                                    <input type="number" id="runtime" name="runtime" required placeholder=" " min="0">
                                    <label for="runtime">Thời Lượng (Phút)</label>
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>

                            <!-- Genres -->
                            <div class="form-group full-width">
                                <label>Thể Loại</label>
                                <div class="genre-selector" id="genre-selector">
                                    <!-- Generated by JS -->
                                </div>
                                <input type="hidden" id="genres" name="genres">
                            </div>

                            <div class="form-actions">
                                <button type="button" id="randomDataBtn" class="btn-secondary">
                                    <i class="fas fa-random"></i> Dữ Liệu Mẫu
                                </button>
                                <button type="submit" id="submitBtn" class="btn-primary">
                                    <span class="btn-text">Phân Tích Ngay</span>
                                    <span class="btn-loader"><i class="fas fa-spinner fa-spin"></i></span>
                                </button>
                            </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Section 2: Results Dashboard (Hidden by default) -->
        <section id="results" class="results-section hidden">
            <div class="section-header">
                <h2>Kết Quả Phân Tích</h2>
                <button id="resetBtn" class="btn-icon"><i class="fas fa-redo"></i></button>
            </div>

            <div class="dashboard-grid">
                <!-- Main Prediction Card -->
                <div class="glass-card result-card main-result">
                    <div class="result-header">
                        <span class="label">Dự Đoán Thành Công</span>
                        <div class="confidence-badge" id="confidence-badge">
                            98%
                        </div>
                    </div>
                    <div class="result-body">
                        <div class="prediction-status" id="prediction-status">
                            <i class="fas fa-check-circle"></i>
                            <span>THÀNH CÔNG</span>
                        </div>
                        <p class="prediction-desc" id="prediction-desc">
                            Dựa trên các chỉ số, phim này có khả năng thành công rất cao.
                        </p>
                    </div>
                </div>

                <!-- Metrics Cards -->
                <div class="glass-card metric-card">
                    <div class="metric-icon"><i class="fas fa-percentage"></i></div>
                    <div class="metric-info">
                        <span class="label">ROI Dự Kiến</span>
                        <span class="value" id="roi-value">--</span>
                    </div>
                </div>

                <div class="glass-card metric-card">
                    <div class="metric-icon"><i class="fas fa-shield-alt"></i></div>
                    <div class="metric-info">
                        <span class="label">Rủi Ro</span>
                        <span class="value" id="risk-value">--</span>
                    </div>
                </div>

                <!-- Chart Section -->
                <div class="glass-card chart-card full-width">
                    <h3><i class="fas fa-chart-bar"></i> Yếu Tố Ảnh Hưởng</h3>
                    <div class="chart-container">
                        <canvas id="featureChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Model Info -->
        <section id="model" class="model-section">
            <div class="glass-card info-card">
                <div class="info-header">
                    <h3><i class="fas fa-robot"></i> Về Mô Hình AI</h3>
                </div>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="label">Thuật Toán</span>
                        <span class="value">Random Forest</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Độ Chính Xác</span>
                        <span class="value">99.52%</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Dữ Liệu Train</span>
                        <span class="value">1,000+ Phim</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Project Journey (Timeline) -->
        <section id="journey" class="journey-section">
            <div class="section-header-center">
                <h2 class="section-title">Hành Trình Dự Án</h2>
                <p class="section-subtitle">Quá trình xây dựng và phát triển hệ thống dự đoán</p>
            </div>

            <div class="timeline">
                <!-- Step 1 -->
                <div class="timeline-item left">
                    <div class="timeline-content glass-card clickable" data-stage="1">
                        <div class="date">Giai Đoạn 1</div>
                        <h3><i class="fas fa-database"></i> Thu Thập Dữ Liệu</h3>
                        <p>
                            Sử dụng Python để crawl dữ liệu từ <strong>TMDB</strong> và <strong>IMDb</strong>.
                            Tổng hợp thông tin của hơn 2,000 bộ phim bao gồm ngân sách, doanh thu, diễn viên, và đạo
                            diễn.
                        </p>
                        <span class="tag">BeautifulSoup</span>
                        <span class="tag">TMDB API</span>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="timeline-item right">
                    <div class="timeline-content glass-card clickable" data-stage="2">
                        <div class="date">Giai Đoạn 2</div>
                        <h3><i class="fas fa-filter"></i> Xử Lý & Làm Sạch</h3>
                        <p>
                            Xử lý dữ liệu thiếu (missing values), chuẩn hóa tiền tệ về USD, và loại bỏ các phim không có
                            doanh thu (outliers).
                            Thực hiện <strong>Feature Engineering</strong> để tạo ra các đặc trưng mới như ROI.
                        </p>
                        <span class="tag">Pandas</span>
                        <span class="tag">NumPy</span>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="timeline-item left">
                    <div class="timeline-content glass-card clickable" data-stage="3">
                        <div class="date">Giai Đoạn 3</div>
                        <h3><i class="fas fa-brain"></i> Huấn Luyện Mô Hình</h3>
                        <p>
                            Thử nghiệm nhiều thuật toán: Linear Regression, SVM, và quyết định chọn <strong>Random
                                Forest</strong>
                            vì độ chính xác cao nhất (99.5%) và khả năng chống overfitting tốt.
                        </p>
                        <span class="tag">Scikit-learn</span>
                        <span class="tag">Random Forest</span>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="timeline-item right">
                    <div class="timeline-content glass-card clickable" data-stage="4">
                        <div class="date">Giai Đoạn 4</div>
                        <h3><i class="fas fa-laptop-code"></i> Xây Dựng Ứng Dụng</h3>
                        <p>
                            Phát triển Web App sử dụng <strong>Flask</strong> cho backend và giao diện hiện đại với
                            <strong>Glassmorphism</strong>. Tích hợp biểu đồ trực quan hóa dữ liệu thời gian thực.
                        </p>
                        <span class="tag">Flask</span>
                        <span class="tag">Chart.js</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: Team -->
        <section id="about" class="team-section">
            <div class="section-header-center">
                <h2 class="section-title">Đội Ngũ Thực Hiện</h2>
            </div>

            <div class="team-grid">
                <div class="glass-card team-card">
                    <div class="member-avatar">
                        <img src="{{ url_for('static', filename='images/member1.jpg') }}" alt="Member 1"
                            onerror="this.src='https://ui-avatars.com/api/?name=Khuê+Đinh&background=FFD700&color=000'">
                    </div>
                    <h3>Đinh Ngọc Khuê</h3>
                    <p class="role">Trưởng Nhóm / AI Engineer</p>
                </div>

                <div class="glass-card team-card">
                    <div class="member-avatar">
                        <img src="{{ url_for('static', filename='images/member2.jpg') }}" alt="Member 2"
                            onerror="this.src='https://ui-avatars.com/api/?name=Hoà+Khổng&background=00f2ff&color=000'">
                    </div>
                    <h3>Khổng Thị Hoà</h3>
                    <p class="role">Data Analyst</p>
                </div>

                <div class="glass-card team-card">
                    <div class="member-avatar">
                        <img src="{{ url_for('static', filename='images/member3.jpg') }}" alt="Member 3"
                            onerror="this.src='https://ui-avatars.com/api/?name=Huy+Phan&background=ff4d4d&color=fff'">
                    </div>
                    <h3>Phan Văn Huy</h3>
                    <p class="role">Frontend Developer</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 MoviePredict AI. Designed for Cinema.</p>
        </div>
    </footer>

    <!-- Journey Details Modal -->
    <div id="journey-modal" class="modal-overlay hidden">
        <div class="modal-content glass-card">
            <button class="modal-close"><i class="fas fa-times"></i></button>
            <div class="modal-header">
                <h3 id="modal-title">Giai Đoạn X</h3>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h4><i class="fas fa-info-circle"></i> Chi Tiết Thực Hiện</h4>
                    <p id="modal-details">...</p>
                </div>
                <div class="modal-section">
                    <h4><i class="fas fa-exclamation-triangle"></i> Vấn Đề Gặp Phải</h4>
                    <p id="modal-issues">...</p>
                </div>
                <div class="modal-section">
                    <h4><i class="fas fa-check-circle"></i> Giải Pháp</h4>
                    <p id="modal-solutions">...</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>