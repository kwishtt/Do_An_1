<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoviePredict | AI Box Office Analytics</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon/favicon.svg') }}">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body class="dark-theme">
    <!-- Background Elements -->
    <div class="bg-noise"></div>
    <div class="bg-glow-top"></div>
    <div class="bg-glow-bottom"></div>

    <!-- Navigation -->
    <nav class="glass-nav">
        <div class="container nav-container">
            <a href="#" class="logo">
                <i class="fas fa-film logo-icon"></i>
                <span class="logo-text">Movie<span class="highlight">Predict</span></span>
            </a>
            <div class="nav-links">
                <a href="#predict" class="active">Dự Đoán</a>
                <a href="#model">Mô Hình</a>
                <a href="#about">Về Chúng Tôi</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container main-layout">
        
        <!-- Section 1: Hero & Input -->
        <section id="predict" class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">
                    Dự Đoán <span class="text-gradient">Doanh Thu Phim</span><br>
                    Bằng Trí Tuệ Nhân Tạo
                </h1>
                <p class="hero-subtitle">
                    Phân tích tiềm năng thành công của dự án phim điện ảnh Việt Nam với độ chính xác 99.5% dựa trên dữ liệu lịch sử.
                </p>
                
                <!-- Input Card -->
                <div class="glass-card input-card">
                    <form id="prediction-form">
                        <div class="form-header">
                            <h3><i class="fas fa-magic"></i> Nhập Thông Tin Phim</h3>
                        </div>
                        
                        <div class="form-grid">
                            <!-- Title -->
                            <div class="form-group full-width">
                                <label>Tên Phim</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-heading"></i>
                                    <input type="text" id="title" name="title" placeholder="VD: Mai, Lật Mặt 7..." required>
                                </div>
                            </div>

                            <!-- Budget -->
                            <div class="form-group">
                                <label>Ngân Sách (USD)</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-dollar-sign"></i>
                                    <input type="number" id="budget" name="budget" placeholder="5000000" required>
                                </div>
                            </div>

                            <!-- Revenue (Current) -->
                            <div class="form-group">
                                <label>Doanh Thu Hiện Tại (USD)</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-chart-line"></i>
                                    <input type="number" id="revenue" name="revenue" placeholder="0" required>
                                </div>
                                <small class="hint">Nhập 0 nếu phim chưa chiếu</small>
                            </div>

                            <!-- Vote Average -->
                            <div class="form-group">
                                <label>Điểm Đánh Giá (TMDB)</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-star"></i>
                                    <input type="number" id="vote_average" name="vote_average" step="0.1" min="0" max="10" placeholder="7.5" required>
                                </div>
                            </div>

                            <!-- Runtime -->
                            <div class="form-group">
                                <label>Thời Lượng (Phút)</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-clock"></i>
                                    <input type="number" id="runtime" name="runtime" placeholder="120" value="120">
                                </div>
                            </div>
                        </div>

                        <!-- Genres -->
                        <div class="form-group full-width">
                            <label>Thể Loại</label>
                            <div class="genre-selector" id="genre-selector">
                                <!-- Generated by JS -->
                            </div>
                            <input type="hidden" id="genres" name="genres">
                        </div>

                        <div class="form-actions">
                            <button type="button" id="randomDataBtn" class="btn-secondary">
                                <i class="fas fa-random"></i> Dữ Liệu Mẫu
                            </button>
                            <button type="submit" id="submitBtn" class="btn-primary">
                                <span class="btn-text">Phân Tích Ngay</span>
                                <span class="btn-loader"><i class="fas fa-spinner fa-spin"></i></span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Section 2: Results Dashboard (Hidden by default) -->
        <section id="results" class="results-section hidden">
            <div class="section-header">
                <h2>Kết Quả Phân Tích</h2>
                <button id="resetBtn" class="btn-icon"><i class="fas fa-redo"></i></button>
            </div>

            <div class="dashboard-grid">
                <!-- Main Prediction Card -->
                <div class="glass-card result-card main-result">
                    <div class="result-header">
                        <span class="label">Dự Đoán Thành Công</span>
                        <div class="confidence-badge" id="confidence-badge">
                            98%
                        </div>
                    </div>
                    <div class="result-body">
                        <div class="prediction-status" id="prediction-status">
                            <i class="fas fa-check-circle"></i>
                            <span>THÀNH CÔNG</span>
                        </div>
                        <p class="prediction-desc" id="prediction-desc">
                            Dựa trên các chỉ số, phim này có khả năng thành công rất cao.
                        </p>
                    </div>
                </div>

                <!-- Metrics Cards -->
                <div class="glass-card metric-card">
                    <div class="metric-icon"><i class="fas fa-percentage"></i></div>
                    <div class="metric-info">
                        <span class="label">ROI Dự Kiến</span>
                        <span class="value" id="roi-value">--</span>
                    </div>
                </div>

                <div class="glass-card metric-card">
                    <div class="metric-icon"><i class="fas fa-shield-alt"></i></div>
                    <div class="metric-info">
                        <span class="label">Rủi Ro</span>
                        <span class="value" id="risk-value">--</span>
                    </div>
                </div>

                <!-- Chart Section -->
                <div class="glass-card chart-card full-width">
                    <h3><i class="fas fa-chart-bar"></i> Yếu Tố Ảnh Hưởng</h3>
                    <div class="chart-container">
                        <canvas id="featureChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Model Info -->
        <section id="model" class="model-section">
            <div class="glass-card info-card">
                <div class="info-header">
                    <h3><i class="fas fa-robot"></i> Về Mô Hình AI</h3>
                </div>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="label">Thuật Toán</span>
                        <span class="value">Random Forest</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Độ Chính Xác</span>
                        <span class="value">99.52%</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Dữ Liệu Train</span>
                        <span class="value">1,000+ Phim</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 MoviePredict AI. Designed for Cinema.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>