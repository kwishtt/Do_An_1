<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoviePredict | AI Box Office Analytics</title>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon/favicon.svg') }}">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body class="dark-theme">
    <!-- Background Elements -->
    <div class="bg-noise"></div>
    <div class="bg-aurora"></div>
    <canvas id="particles-canvas"></canvas>

    <!-- Navigation -->
    <nav class="glass-nav">
        <div class="container nav-container">
            <a href="#" class="logo">
                <i class="fas fa-film logo-icon"></i>
                <span class="logo-text">Movie<span class="highlight">Predict</span></span>
            </a>
            <div class="nav-links">
                <a href="#predict" class="active">Dự Đoán</a>
                <a href="#model">Mô Hình</a>
                <a href="#about">Về Chúng Tôi</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container main-layout">

        <!-- Section 1: Hero & Input -->
        <section id="predict" class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title glitch-text" data-text="Dự Đoán Doanh Thu Phim">
                    Dự Đoán <span class="text-gradient">Doanh Thu Phim</span><br>
                    Bằng Trí Tuệ Nhân Tạo
                </h1>
                <p class="hero-subtitle">
                    Phân tích tiềm năng thành công của dự án phim điện ảnh Việt Nam với độ chính xác 99.5% dựa trên dữ
                    liệu lịch sử.
                </p>

                <!-- Input Card -->
                <div class="glass-card input-card">
                    <form id="prediction-form">
                        <div class="form-header">
                            <h3><i class="fas fa-magic"></i> Nhập Thông Tin Phim</h3>
                        </div>

                        <div class="form-grid">
                            <!-- Title -->
                            <div class="form-group full-width">
                                <label>Tên Phim</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-heading"></i>
                                    <input type="text" id="title" name="title" placeholder="VD: Mai, Lật Mặt 7..."
                                        required>
                                </div>
                            </div>

                            <div class="form-group floating-group">
                                <div class="input-wrapper">
                                    <input type="number" id="budget" name="budget" required placeholder=" " min="0">
                                    <label for="budget">Ngân Sách (USD)</label>
                                    <i class="fas fa-money-bill-wave"></i>
                                </div>
                            </div>

                            <div class="form-group floating-group">
                                <div class="input-wrapper">
                                    <input type="number" id="revenue" name="revenue" required placeholder=" " min="0">
                                    <label for="revenue">Doanh Thu Hiện Tại (USD)</label>
                                    <i class="fas fa-chart-line"></i>
                                </div>

                            </div>

                            <div class="form-group floating-group">
                                <div class="input-wrapper">
                                    <input type="number" id="vote_average" name="vote_average" step="0.1" min="0"
                                        max="10" required placeholder=" ">
                                    <label for="vote_average">Điểm Đánh Giá (TMDB)</label>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>

                            <div class="form-group floating-group">
                                <div class="input-wrapper">
                                    <input type="number" id="runtime" name="runtime" required placeholder=" " min="0">
                                    <label for="runtime">Thời Lượng (Phút)</label>
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>

                            <!-- Genres -->
                            <div class="form-group full-width">
                                <label>Thể Loại</label>
                                <div class="genre-selector" id="genre-selector">
                                    <!-- Generated by JS -->
                                </div>
                                <input type="hidden" id="genres" name="genres">
                            </div>

                            <div class="form-actions">
                                <button type="button" id="randomDataBtn" class="btn-secondary">
                                    <i class="fas fa-random"></i> Dữ Liệu Mẫu
                                </button>
                                <button type="submit" id="submitBtn" class="btn-primary">
                                    <span class="btn-text">Phân Tích Ngay</span>
                                    <span class="btn-loader"><i class="fas fa-spinner fa-spin"></i></span>
                                </button>
                            </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Section 2: Results Dashboard (Hidden by default) -->
        <section id="results" class="results-section hidden">
            <div class="section-header">
                <div>
                    <h2>Kết Quả Phân Tích</h2>
                    <h1 id="result-movie-title" class="result-movie-title"></h1>
                </div>
                <button id="resetBtn" class="btn-icon"><i class="fas fa-redo"></i></button>
            </div>

            <div class="dashboard-grid">
                <!-- Main Prediction Card -->
                <div class="glass-card result-card main-result">
                    <div class="result-header">
                        <span class="label">Tỉ Lệ Thành Công Của Phim</span>
                        <div class="confidence-badge" id="confidence-badge">
                            98%
                        </div>
                    </div>
                    <div class="model-info-badge">
                        <i class="fas fa-microchip"></i> Model: Random Forest
                    </div>
                    <div class="result-body">
                        <div class="prediction-status" id="prediction-status">
                            <i class="fas fa-check-circle"></i>
                            <span>THÀNH CÔNG</span>
                        </div>
                        <p class="prediction-desc" id="prediction-desc">
                            Dựa trên các chỉ số, phim này có khả năng thành công rất cao.
                        </p>
                    </div>
                </div>

                <!-- Metrics Cards -->
                <div class="glass-card metric-card">
                    <div class="metric-icon"><i class="fas fa-percentage"></i></div>
                    <div class="metric-info">
                        <span class="label">ROI Dự Kiến</span>
                        <span class="value" id="roi-value">--</span>
                    </div>
                </div>

                <div class="glass-card metric-card">
                    <div class="metric-icon"><i class="fas fa-shield-alt"></i></div>
                    <div class="metric-info">
                        <span class="label">Rủi Ro</span>
                        <span class="value" id="risk-value">--</span>
                    </div>
                </div>

                <!-- Chart Section -->
                <div class="glass-card chart-card full-width">
                    <h3><i class="fas fa-chart-bar"></i> Yếu Tố Ảnh Hưởng</h3>
                    <div class="chart-container">
                        <canvas id="featureChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Model Info -->
        <section id="model" class="model-section">
            <div class="glass-card info-card">
                <div class="info-header">
                    <h3><i class="fas fa-robot"></i> Về Mô Hình AI</h3>
                </div>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="label">Thuật Toán</span>
                        <span class="value">Random Forest</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Độ Chính Xác</span>
                        <span class="value">99.52%</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Dữ Liệu Train</span>
                        <span class="value">1,000+ Phim</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Project Journey (Timeline) -->
        <section id="journey" class="journey-section">
            <div class="section-header-center">
                <h2 class="section-title">Hành Trình Dự Án</h2>
                <p class="section-subtitle">Quá trình xây dựng và phát triển hệ thống dự đoán</p>
            </div>

            <div class="timeline">
                <!-- Step 1 -->
                <div class="timeline-item left">
                    <div class="timeline-content glass-card clickable" data-stage="1">
                        <div class="date">Tuần 1-2</div>
                        <h3><i class="fas fa-search"></i> Khởi Động & Thu Thập</h3>
                        <p>
                            Xác định bài toán và thu thập dữ liệu thô từ <strong>TMDB & IMDb</strong>.
                            Xây dựng nền tảng cho dự án với hơn 2,000 bộ phim.
                        </p>
                        <span class="tag">Data Collection</span>
                        <span class="tag">Planning</span>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="timeline-item right">
                    <div class="timeline-content glass-card clickable" data-stage="2">
                        <div class="date">Tuần 2-3</div>
                        <h3><i class="fas fa-broom"></i> Làm Sạch & Định Nghĩa</h3>
                        <p>
                            Xử lý dữ liệu nhiễu và định nghĩa tiêu chí <strong>"Thành Công"</strong>
                            (ROI ≥ 1 & Vote ≥ 6.5). Chuẩn bị dataset sạch sẽ.
                        </p>
                        <span class="tag">Data Cleaning</span>
                        <span class="tag">EDA</span>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="timeline-item left">
                    <div class="timeline-content glass-card clickable" data-stage="3">
                        <div class="date">Tuần 4</div>
                        <h3><i class="fas fa-cogs"></i> Feature Engineering</h3>
                        <p>
                            Biến đổi dữ liệu thô thành <strong>47 đặc trưng</strong> có ý nghĩa.
                            Tạo các biến mới như ROI, Mùa phim, và Tương tác diễn viên.
                        </p>
                        <span class="tag">Feature Extraction</span>
                        <span class="tag">One-Hot Encoding</span>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="timeline-item right">
                    <div class="timeline-content glass-card clickable" data-stage="4">
                        <div class="date">Tuần 5-8</div>
                        <h3><i class="fas fa-chess-king"></i> Huấn Luyện & Tối Ưu</h3>
                        <p>
                            Cuộc đua giữa <strong>Logistic Regression</strong> và <strong>Random Forest</strong>.
                            Tinh chỉnh tham số và kiểm chứng chéo (Cross-Validation).
                        </p>
                        <span class="tag">Model Training</span>
                        <span class="tag">Optimization</span>
                    </div>
                </div>

                <!-- Step 5 -->
                <div class="timeline-item left">
                    <div class="timeline-content glass-card clickable" data-stage="5">
                        <div class="date">Tuần 9-10</div>
                        <h3><i class="fas fa-rocket"></i> Hoàn Thiện Sản Phẩm</h3>
                        <p>
                            Xây dựng Web App với giao diện <strong>Glassmorphism</strong>.
                            Viết báo cáo chi tiết và đóng gói sản phẩm cuối cùng.
                        </p>
                        <span class="tag">Web Development</span>
                        <span class="tag">Deployment</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4.5: Data Storytelling -->
        <section id="story" class="story-section">
            <div class="container">
                <!-- Intro Block -->
                <div class="story-intro text-center mb-5">
                    <span class="badge-glow">Báo Cáo Dự Án</span>
                    <h2 class="story-title">Hành Trình Chinh Phục Dữ Liệu Điện Ảnh</h2>
                    <p class="story-lead">
                        Được thực hiện bởi <strong>Nhóm 04 - Khoa Học Dữ Liệu HUMG</strong> trong 5 tuần nỗ lực không
                        ngừng nghỉ.
                        Chúng tôi đã biến những con số khô khan thành một công cụ dự đoán mạnh mẽ.
                    </p>
                </div>

                <!-- Chapter 1: The Data -->
                <div class="story-chapter">
                    <div class="chapter-header">
                        <span class="chapter-number">01</span>
                        <h3>"Đãi Cát Tìm Vàng" - Xử Lý Dữ Liệu</h3>
                    </div>
                    <div class="chapter-content">
                        <div class="row">
                            <div class="col-text">
                                <p>
                                    Hành trình bắt đầu với một thách thức lớn: <strong>2,194 bộ phim</strong> từ nhiều
                                    nguồn khác nhau với dữ liệu hỗn loạn.
                                    Trong 4 tuần đầu tiên, chúng tôi đã phải "làm sạch" từng dòng dữ liệu, xử lý các giá
                                    trị thiếu và loại bỏ những nhiễu loạn.
                                </p>
                                <p>
                                    Nhưng điều thú vị nhất là quá trình <strong>Feature Engineering</strong>. Chúng tôi
                                    không chỉ dùng dữ liệu thô, mà đã sáng tạo ra <strong>47 đặc trưng mới</strong>.
                                    Từ việc phân tích thời điểm phát hành (Mùa phim bom tấn vs Mùa thấp điểm) đến việc
                                    tính toán chỉ số ROI (Tỷ suất lợi nhuận).
                                </p>
                                <div class="stats-mini-grid">
                                    <div class="stat-mini">
                                        <strong>2,194</strong>
                                        <span>Bộ Phim</span>
                                    </div>
                                    <div class="stat-mini">
                                        <strong>47</strong>
                                        <span>Features</span>
                                    </div>
                                    <div class="stat-mini">
                                        <strong>20+</strong>
                                        <span>Năm Dữ Liệu</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-visual">
                                <div class="glass-card chart-box-mini">
                                    <h4>Phân Bố Thể Loại Phim</h4>
                                    <div class="chart-wrapper-mini">
                                        <canvas id="genreChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chapter 2: The Model Race -->
                <div class="story-chapter reverse">
                    <div class="chapter-header">
                        <span class="chapter-number">02</span>
                        <h3>Cuộc Đua Thuật Toán</h3>
                    </div>
                    <div class="chapter-content">
                        <div class="row">
                            <div class="col-visual">
                                <div class="glass-card comparison-card">
                                    <h4>Hiệu Suất Mô Hình (F1-Score)</h4>
                                    <div class="comparison-bar">
                                        <div class="model-name">Logistic Regression</div>
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 84.88%">84.88%</div>
                                        </div>
                                    </div>
                                    <div class="comparison-bar winner">
                                        <div class="model-name">Random Forest <i class="fas fa-crown text-warning"></i>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 99.52%">99.52%</div>
                                        </div>
                                    </div>
                                    <p class="comparison-note">
                                        Random Forest vượt trội nhờ khả năng xử lý các mối quan hệ phi tuyến tính phức
                                        tạp.
                                    </p>
                                </div>
                            </div>
                            <div class="col-text">
                                <p>
                                    Tuần thứ 5 là thời điểm quyết định. Chúng tôi đưa hai "đấu thủ" lên sàn đấu:
                                    <strong>Logistic Regression</strong> (cổ điển, dễ hiểu) và <strong>Random
                                        Forest</strong> (mạnh mẽ, linh hoạt).
                                </p>
                                <p>
                                    Kết quả thật bất ngờ nhưng thuyết phục. Trong khi Logistic Regression chỉ đạt độ
                                    chính xác khoảng 85%, <strong>Random Forest</strong> đã bứt phá ngoạn mục với
                                    <strong>F1-Score lên tới 99.52%</strong>.
                                    Mô hình này đã chứng minh khả năng học hỏi tuyệt vời từ những tương tác phức tạp
                                    giữa ngân sách, diễn viên và thể loại phim.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chapter 3: The Insights -->
                <div class="story-chapter">
                    <div class="chapter-header">
                        <span class="chapter-number">03</span>
                        <h3>Bí Mật Của Sự Thành Công</h3>
                    </div>
                    <div class="chapter-content">
                        <p class="text-center mb-4">
                            Điều gì thực sự làm nên một bộ phim "bom tấn"? Phân tích Feature Importance của chúng tôi đã
                            hé lộ những sự thật thú vị.
                        </p>
                        <div class="insights-grid">
                            <div class="glass-card insight-card highlight">
                                <div class="insight-icon"><i class="fas fa-star"></i></div>
                                <h4>Chất Lượng Là Vua</h4>
                                <div class="insight-value">41.56%</div>
                                <p>
                                    <strong>Vote Average</strong> là yếu tố quan trọng nhất. Khán giả ngày nay rất thông
                                    minh, một bộ phim hay thực sự sẽ luôn có chỗ đứng.
                                </p>
                            </div>
                            <div class="glass-card insight-card">
                                <div class="insight-icon"><i class="fas fa-balance-scale"></i></div>
                                <h4>Cân Bằng Ngân Sách</h4>
                                <div class="insight-value">10.70%</div>
                                <p>
                                    <strong>ROI vs Vote</strong>: Sự cân bằng giữa lợi nhuận và đánh giá nghệ thuật.
                                    Phim vừa lời vừa được khen mới là thành công bền vững.
                                </p>
                            </div>
                            <div class="glass-card insight-card">
                                <div class="insight-icon"><i class="fas fa-bullhorn"></i></div>
                                <h4>Sức Mạnh Truyền Thông</h4>
                                <div class="insight-value">5.14%</div>
                                <p>
                                    <strong>Vote Count</strong>: Số lượng người quan tâm và đánh giá phản ánh độ phủ
                                    sóng (viral) của bộ phim.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Conclusion -->
                <div class="story-footer text-center mt-5">
                    <p class="conclusion-text">
                        "Dự án này không chỉ là bài tập, mà là nỗ lực của chúng tôi để mang góc nhìn <strong>Khoa Học Dữ
                            Liệu</strong> vào nghệ thuật điện ảnh.
                        Hy vọng công cụ này sẽ hỗ trợ đắc lực cho các nhà làm phim Việt Nam."
                    </p>
                    <div class="signature">
                        <img src="{{ url_for('static', filename='images/signature.png') }}" alt="Signature"
                            class="signature-img" onerror="this.style.display='none'">
                        <span>Nhóm 04 - KHDLK68 - HUMG</span>
                    </div>
                </div>
            </div>
        </section>
        <section id="about" class="team-section">
            <div class="section-header-center">
                <h2 class="section-title">Đội Ngũ Thực Hiện</h2>
            </div>

            <div class="team-grid">
                <div class="glass-card team-card">
                    <div class="member-avatar">
                        <img src="{{ url_for('static', filename='images/member1.jpg') }}" alt="Member 1"
                            onerror="this.src='https://ui-avatars.com/api/?name=Khuê+Đinh&background=FFD700&color=000'">
                    </div>
                    <h3>Đinh Ngọc Khuê</h3>
                    <p class="role">Data EDA</p>
                </div>

                <div class="glass-card team-card">
                    <div class="member-avatar">
                        <img src="{{ url_for('static', filename='images/member2.jpg') }}" alt="Member 2"
                            onerror="this.src='https://ui-avatars.com/api/?name=Hoà+Khổng&background=00f2ff&color=000'">
                    </div>
                    <h3>Khổng Thị Hoà</h3>
                    <p class="role">Trưởng nhóm</p>
                </div>

                <div class="glass-card team-card">
                    <div class="member-avatar">
                        <img src="{{ url_for('static', filename='images/member3.jpg') }}" alt="Member 3"
                            onerror="this.src='https://ui-avatars.com/api/?name=Huy+Phan&background=ff4d4d&color=fff'">
                    </div>
                    <h3>Phan Văn Huy</h3>
                    <p class="role">Data Engineer</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; Bộ môn Đồ Án 01 - Chuyên ngành Khoa học dữ liệu - HUMG</p>
        </div>
    </footer>

    <!-- Journey Details Modal -->
    <div id="journey-modal" class="modal-overlay hidden">
        <div class="modal-content glass-card">
            <button class="modal-close"><i class="fas fa-times"></i></button>
            <div class="modal-header">
                <h3 id="modal-title">Giai Đoạn X</h3>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h4><i class="fas fa-info-circle"></i> Chi Tiết Thực Hiện</h4>
                    <p id="modal-details">...</p>
                </div>
                <div class="modal-section">
                    <h4><i class="fas fa-exclamation-triangle"></i> Vấn Đề Gặp Phải</h4>
                    <p id="modal-issues">...</p>
                </div>
                <div class="modal-section">
                    <h4><i class="fas fa-check-circle"></i> Giải Pháp</h4>
                    <p id="modal-solutions">...</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>