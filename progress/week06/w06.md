# Tuáº§n 6 â€” MÃ´ hÃ¬nh chÃ­nh & Feature Importance

Má»¥c tiÃªu
- Huáº¥n luyá»‡n mÃ´ hÃ¬nh máº¡nh hÆ¡n vÃ  xÃ¡c Ä‘á»‹nh yáº¿u tá»‘ áº£nh hÆ°á»Ÿng chÃ­nh.

Viá»‡c cáº§n lÃ m
- Huáº¥n luyá»‡n Random Forest (hoáº·c model tÆ°Æ¡ng Ä‘Æ°Æ¡ng), thá»­ má»™t vÃ i tham sá»‘ cÆ¡ báº£n.
- Xuáº¥t danh sÃ¡ch top 10 Ä‘áº·c trÆ°ng quan trá»ng.
- So sÃ¡nh hiá»‡u nÄƒng vá»›i model baseline.

Giao ná»™p
- Káº¿t quáº£ model chÃ­nh vÃ  danh sÃ¡ch cÃ¡c yáº¿u tá»‘ quan trá»ng.

Checklist
- [ ] Huáº¥n luyá»‡n Random Forest
- [ ] TrÃ­ch feature importance
- [ ] So sÃ¡nh vá»›i baseline

# Má»¤C TIÃŠU TUáº¦N 6

- QUAN TRá»ŒNG: TÃ¬m hiá»ƒu Random Forest vÃ  cÃ¡ch nÃ³ cáº£i thiá»‡n so vá»›i Logistic Regression. 
- HIá»‚U RÃ•: CÃ¡ch trÃ­ch xuáº¥t vÃ  giáº£i thÃ­ch feature importance tá»« mÃ´ hÃ¬nh. 
- á»¨NG Dá»¤NG: Ãp dá»¥ng kiáº¿n thá»©c nÃ y Ä‘á»ƒ cáº£i thiá»‡n mÃ´ hÃ¬nh dá»± Ä‘oÃ¡n cá»§a báº¡n trong cÃ¡c tuáº§n tiáº¿p theo.

---

## ï¿½ TÃ“M Táº®T TIáº¾N Äá»˜ 5 TUáº¦N TRÆ¯á»šC

### âœ… **Tuáº§n 1 - Khá»Ÿi Ä‘á»™ng & Thu tháº­p dá»¯ liá»‡u**
- Láº¥y dataset `Movies.csv` gá»‘c vá»›i thÃ´ng tin phim quá»‘c táº¿ vÃ  Viá»‡t Nam
- XÃ¡c Ä‘á»‹nh tiÃªu chÃ­ "thÃ nh cÃ´ng" cho phim (ROI + Vote Average)
- Thiáº¿t láº­p cáº¥u trÃºc project vÃ  workflow Git

### âœ… **Tuáº§n 2 - LÃ m sáº¡ch dá»¯ liá»‡u**
- Xá»­ lÃ½ missing values vÃ  outliers trong Budget/Revenue
- Chuáº©n hÃ³a Ä‘á»‹nh dáº¡ng Release Date vÃ  cÃ¡c cá»™t text
- Táº¡o `clean_movies.csv` vá»›i 1020 phim cháº¥t lÆ°á»£ng

### âœ… **Tuáº§n 3 - Táº¡o nhÃ£n & EDA**
- Äá»‹nh nghÄ©a nhÃ£n `Success` dá»±a trÃªn ROI â‰¥ 1 vÃ  Vote Average â‰¥ 6.5
- PhÃ¢n tÃ­ch phÃ¢n phá»‘i dá»¯ liá»‡u: tá»· lá»‡ thÃ nh cÃ´ng, genre phá»• biáº¿n
- Táº¡o `clean_movies_with_labels.csv` vá»›i target variable

### âœ… **Tuáº§n 4 - Feature Engineering**  
- Táº¡o 47 features tá»« dá»¯ liá»‡u gá»‘c:
  - Time features: `release_year`, `release_month`, `release_quarter`
  - Financial features: `roi`, `roi_clipped`, `budget_per_year` 
  - Content features: `num_genres`, `num_main_cast`, genre dummies
  - Engineered features: `roi_vs_vote`, `cast_genre_interaction`
- Output: `clean_movies_features.csv` (1020 rows Ã— 65 columns)

### âœ… **Tuáº§n 5 - Baseline Modeling**
- **Data preparation**: Train/test split 80/20, Min-Max scaling, stratified sampling
- **Logistic Regression baseline**: Accuracy 84.80%, F1-Score 84.88%
- **Random Forest model**: Accuracy 99.51%, F1-Score 99.51% 
- **Cross-validation**: 5-fold CV xÃ¡c nháº­n Random Forest á»•n Ä‘á»‹nh (std 0.0072)
- **Feature importance**: Top 3 features quan trá»ng nháº¥t:
  1. `Vote Average` (41.56%) - Cháº¥t lÆ°á»£ng phim
  2. `roi_vs_vote` (10.70%) - TÆ°Æ¡ng quan ROI vÃ  Ä‘Ã¡nh giÃ¡  
  3. `roi` (7.05%) - Lá»£i nhuáº­n thuáº§n
- **Model selection**: Chá»n Random Forest lÃ m final model

### ğŸ¯ **Káº¿t quáº£ hiá»‡n táº¡i**: 
- Dataset: 1020 phim, 47 features, balanced classes
- Best model: Random Forest (99.51% accuracy)
- Insights: Vote Average lÃ  yáº¿u tá»‘ quyáº¿t Ä‘á»‹nh thÃ nh cÃ´ng phim nháº¥t

---

## ï¿½ğŸ“‹ TODO LIST CHI TIáº¾T TUáº¦N 6

### ğŸ¯ BÆ¯á»šC 1: Tá»‘i Æ¯u HÃ³a Random Forest Model
**Má»¥c Ä‘Ã­ch**: Cáº£i thiá»‡n hiá»‡u suáº¥t vÃ  trÃ¡nh overfitting
**Thá»i gian**: 2-3 giá»

#### 1.1 Hyperparameter Tuning
- [x] Táº¡o file `hyperparameter_tuning.py` trong `progress/week06/`
- [x] Thá»­ nghiá»‡m cÃ¡c tham sá»‘:
  - `n_estimators`: [50, 100, 200, 300]
  - `max_depth`: [5, 10, 15, 20, None]
  - `min_samples_split`: [2, 5, 10]
  - `min_samples_leaf`: [1, 2, 4]
- [x] Sá»­ dá»¥ng GridSearchCV hoáº·c RandomizedSearchCV
- [x] So sÃ¡nh vá»›i model hiá»‡n táº¡i (accuracy 99.51%)
- [x] LÆ°u best model vÃ o `optimized_rf_model.pkl`

#### 1.2 Kiá»ƒm Tra Overfitting
- [x] Táº¡o learning curves Ä‘á»ƒ visualize train vs validation performance
- [x] PhÃ¢n tÃ­ch train accuracy vs test accuracy gap
- [x] Náº¿u overfit: giáº£m `max_depth`, tÄƒng `min_samples_split`
- [x] Ghi káº¿t quáº£ vÃ o `overfitting_analysis.txt`

### ğŸ” BÆ¯á»šC 2: PhÃ¢n TÃ­ch Feature Importance SÃ¢u HÆ¡n
**Má»¥c Ä‘Ã­ch**: Hiá»ƒu rÃµ yáº¿u tá»‘ nÃ o áº£nh hÆ°á»Ÿng Ä‘áº¿n thÃ nh cÃ´ng phim
**Thá»i gian**: 2 giá»

#### 2.1 Visualize Feature Importance
- [ ] Táº¡o file `feature_analysis.py` 
- [ ] Váº½ bar chart top 15 features quan trá»ng nháº¥t
- [ ] Táº¡o heatmap correlation giá»¯a top features vÃ  target
- [ ] So sÃ¡nh importance giá»¯a features gá»‘c vs engineered features
- [ ] LÆ°u charts vÃ o folder `charts/week06/`

#### 2.2 Business Insights tá»« Features
- [ ] PhÃ¢n tÃ­ch Ã½ nghÄ©a thá»±c táº¿ cá»§a top 10 features:
  - `Vote Average` (41.56%): Cháº¥t lÆ°á»£ng phim quan trá»ng nháº¥t
  - `roi_vs_vote` (10.70%): TÆ°Æ¡ng quan ROI vÃ  Ä‘Ã¡nh giÃ¡
  - `roi` (7.05%): Lá»£i nhuáº­n thuáº§n
- [ ] LiÃªn káº¿t vá»›i domain knowledge vá» ngÃ nh phim
- [ ] Viáº¿t insights vÃ o `business_insights.md`

### ğŸ“Š BÆ¯á»šC 3: So SÃ¡nh Vá»›i Model Baseline Chi Tiáº¿t
**Má»¥c Ä‘Ã­ch**: Chá»©ng minh Random Forest vÆ°á»£t trá»™i
**Thá»i gian**: 1-2 giá»

#### 3.1 Comprehensive Comparison
- [ ] Táº¡o file `model_comparison.py`
- [ ] So sÃ¡nh nhiá»u metrics:
  - Accuracy, Precision, Recall, F1-Score
  - AUC-ROC curve 
  - Precision-Recall curve
  - Training time
- [ ] Táº¡o comparison table vÃ  visualization
- [ ] PhÃ¢n tÃ­ch khi nÃ o nÃªn dÃ¹ng Random Forest vs Logistic Regression

#### 3.2 Error Analysis Between Models
- [ ] So sÃ¡nh confusion matrix cá»§a cáº£ 2 models
- [ ] PhÃ¢n tÃ­ch cases mÃ  Random Forest predict Ä‘Ãºng nhÆ°ng Logistic sai
- [ ] TÃ¬m pattern trong misclassified examples
- [ ] LÆ°u káº¿t quáº£ vÃ o `detailed_comparison.txt`

### ğŸ¬ BÆ¯á»šC 4: Domain-Specific Analysis
**Má»¥c Ä‘Ã­nh**: Ãp dá»¥ng hiá»ƒu biáº¿t vá» ngÃ nh phim
**Thá»i gian**: 1-2 giá»

#### 4.1 Genre Success Analysis
- [ ] PhÃ¢n tÃ­ch success rate theo tá»«ng genre
- [ ] Xem genre nÃ o cÃ³ ROI cao nháº¥t
- [ ] LiÃªn káº¿t vá»›i feature importance (vÃ­ dá»¥: táº¡i sao Comedy quan trá»ng)
- [ ] Táº¡o insights cho nhÃ  sáº£n xuáº¥t phim

#### 4.2 Vietnam vs International Movie Analysis  
- [ ] So sÃ¡nh success pattern giá»¯a phim Viá»‡t vÃ  nÆ°á»›c ngoÃ i
- [ ] PhÃ¢n tÃ­ch features quan trá»ng riÃªng cho phim Viá»‡t
- [ ] Äá» xuáº¥t strategy cho ngÃ nh phim Viá»‡t

### ğŸ“ BÆ¯á»šC 5: Documentation vÃ  BÃ¡o CÃ¡o
**Má»¥c Ä‘Ã­ch**: Ghi láº¡i káº¿t quáº£ vÃ  chuáº©n bá»‹ cho tuáº§n sau
**Thá»i gian**: 1 giá»

#### 5.1 Update Week 6 Report
- [ ] Viáº¿t bÃ¡o cÃ¡o chi tiáº¿t trong `w06.md`
- [ ] Include táº¥t cáº£ findings, charts, insights
- [ ] LiÃªn káº¿t vá»›i business value

#### 5.2 Prepare for Week 7
- [ ] Identify potential issues cho tuáº§n 7 (class imbalance handling)
- [ ] Chuáº©n bá»‹ data vÃ  model cho error analysis tuáº§n sau
- [ ] Update project README vá»›i week 6 progress

---

## ğŸ¯ TIÃŠU CHÃ THÃ€NH CÃ”NG TUáº¦N 6

âœ… **Model Performance**: Optimized Random Forest vá»›i hiá»‡u suáº¥t tá»‘t hÆ¡n baseline
âœ… **Feature Understanding**: Clear insights vá» top 10 features quan trá»ng nháº¥t  
âœ… **Business Value**: Practical recommendations cho ngÃ nh phim
âœ… **Documentation**: Complete bÃ¡o cÃ¡o vá»›i charts vÃ  analysis
âœ… **Reproducibility**: Code cháº¡y Ä‘Æ°á»£c vÃ  results cÃ³ thá»ƒ replicate

---

## ğŸ’¡ TIPS QUAN TRá»ŒNG

1. **Overfitting Check**: Náº¿u accuracy quÃ¡ cao (99%+), cÃ³ thá»ƒ model Ä‘ang overfit
2. **Feature Selection**: CÃ³ thá»ƒ remove features vá»›i importance < 1%
3. **Validation Strategy**: DÃ¹ng stratified k-fold cho data khÃ´ng cÃ¢n báº±ng
4. **Business Context**: LuÃ´n liÃªn káº¿t technical findings vá»›i thá»±c táº¿ ngÃ nh phim
5. **Documentation**: Ghi chÃº táº¥t cáº£ experiments Ä‘á»ƒ khÃ´ng bá»‹ láº·p láº¡i

---

## ğŸ“Š Káº¾T QUáº¢ BÆ¯á»šC 1 - Tá»I Æ¯U HÃ“A RANDOM FOREST MODEL âœ…

### âœ… **BÆ°á»›c 1.1: Hyperparameter Tuning - HOÃ€N THÃ€NH**
**Káº¿t quáº£ chÃ­nh:**
- **Best Parameters tÃ¬m Ä‘Æ°á»£c:**
  - `n_estimators`: 100 (optimal)
  - `max_depth`: 5 (trÃ¡nh overfitting) 
  - `min_samples_split`: 2
  - `min_samples_leaf`: 1
  - `max_features`: None
- **Performance:** F1-Score 99.52% (báº±ng baseline)
- **CV Score:** 99.88% (ráº¥t á»•n Ä‘á»‹nh)
- **Thá»i gian tuning:** 49.78 giÃ¢y
- **Káº¿t luáº­n:** Model baseline Ä‘Ã£ optimal, khÃ´ng cáº§n Ä‘iá»u chá»‰nh

### âœ… **BÆ°á»›c 1.2: Overfitting Analysis - HOÃ€N THÃ€NH**
**Káº¿t quáº£ phÃ¢n tÃ­ch:**
- **Train vs Test Gap:** 
  - Accuracy gap: 0.49% (ráº¥t tháº¥p)
  - F1 gap: 0.48% (ráº¥t tháº¥p)
- **Overfitting Status:** No Significant Overfitting âœ…
- **Recommendation:** Model á»•n Ä‘á»‹nh, cÃ³ thá»ƒ sá»­ dá»¥ng
- **Learning Curves:** ÄÃ£ táº¡o vÃ  phÃ¢n tÃ­ch chi tiáº¿t
- **Optimal Training Size:** 652 samples

**ğŸ“ Files Ä‘Ã£ táº¡o:**
- `progress/week06/hyperparameter_tuning.py` + `hyperparameter_tuning_results.txt`
- `progress/week06/overfitting_analysis.py` + `overfitting_analysis.txt`  
- `chart/week06/overfitting_analysis.png` (Learning curves)
- `data/pkl/optimized_rf_model.pkl` (Best model)

**ğŸ¯ Insights quan trá»ng:**
1. **Model baseline Ä‘Ã£ ráº¥t tá»‘t** - Hyperparameter tuning khÃ´ng cáº£i thiá»‡n thÃªm
2. **KhÃ´ng cÃ³ overfitting** - Gap train-test chá»‰ 0.48%
3. **max_depth=5 optimal** - GiÃºp trÃ¡nh overfitting mÃ  váº«n giá»¯ performance
4. **Dataset cháº¥t lÆ°á»£ng cao** - Model há»c Ä‘Æ°á»£c patterns tá»‘t

---

